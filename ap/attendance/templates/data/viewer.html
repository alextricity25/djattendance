{% extends "base.html" %}
{% load staticfiles %}
{% load bootstrap3 %}
{% load common_tags %}

{% block title %}{{ page_title }}{% endblock %}

{% block scripts %}
<script>
  $(document).ready(function() {
    var dt_cols = JSON.parse('{{dt_cols|safe}}');
    var table = $('#id_datatable').DataTable({
      "serverSide": true,
      "ajax": "{{source_url}}?format=datatables",
      "autoWidth": true,
      "columns": dt_cols,
    });
  });

  $(document).keypress(function(e) {
    if (e.keyCode == 13) {
      $('div.dataTables_filter input').focus()
    }
  });
</script>
{% endblock %}

{% block references %}
<style type="text/css">
  th > input[type='text']{
    width: 100%; /*this will make the text box fill the horizontal space of the its container td*/
  }
</style>

{% endblock %}

{% block content %}
<h2>{{ page_title }}</h2>
<table id="id_datatable" class="table table-striped table-bordered">
  <thead>
    <tr>
      {% for c in cols %}
      <th>{{c|title}}</th>
      {% endfor %}
    </tr>
  </thead>
</table>
{% endblock %}
