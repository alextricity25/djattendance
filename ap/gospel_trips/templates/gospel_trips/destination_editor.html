{% extends "base.html" %}
{% load staticfiles %}
{% load common_tags %}

{% block title %}{{page_title}}{% endblock %}

{% block scripts %}
  {{form.media}}
  <script type="text/javascript">
    $(document).ready(() => {
      $("#id_destination_multiselect").select2();
      $("#id_destination_select").select2();
      .on("select2:select", (event) => {
        let name = $(event.currentTarget).find("option:selected").val();
        $("#id_destination_edit").val(name);
      });
    });
  </script>
{% endblock %}

{% block content %}
<h2>{{page_title}}</h2>
<form action="/add" method="post" id="id_destination_add_form">
  <h4>Add New Location</h4>
  <input id="id_destination_name" name="destination_name" type="text" placeholder="Asia: no preference" required=required>
  <button type="submit" class="btn btn-primary btn-save">Add</button>
</form>

<form action="{% url 'gospel_trips:destination-remove' %}" method="post" id="id_destination_remove_form">
  <h4>Remove Location</h4>
  <select id="id_destination_multiselect" name="destinations" multiple="multiple">
    {% for x in destinations %}
      <option value="{{x.id}}">{{x.name}}</option>
    {% endfor %}
  </select>
  <button type="submit" class="btn btn-primary btn-danger">Remove</button>
</form>

<form action="{% url 'gospel_trips:destination-edit' %}" method="post" id="id_destination_edit_form">
  <h4>Edit Location</h4>
  <select id="id_destination_select" name="destination">
    {% for x in destinations %}
      <option value="{{x.id}}">{{x.name}}</option>
    {% endfor %}
  </select>
  <input id="id_destination_edit" name="destination_edit" type="text" required=required>
  <button type="submit" class="btn btn-primary btn-save">Edit</button>
</form>
{% endblock %}
